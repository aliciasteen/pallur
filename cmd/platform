#!/bin/bash

SUBCOMMAND_NAME="platform"

cmd_desc() {
  echo "Deploy Pallur"
}

help() {
  echo "usage: ${CMD} ${SUBCOMMAND_NAME} <options>"
  echo ""
  echo "create [OPTION]";
  echo ""
  echo "Options:";
  echo "    -n    Name of Project. Required.";
  echo "    -c    URL of Application Repository. Required.";
  echo "    -r    Route for the project. If not provided will be automatically generated.";
  echo "    -h    Print this help"
  exit 1;
}

initalize() {
  echo "Launching Pallur"
  docker-compose -f ../resources/docker-compose-setup.yml up -d
}

up() {
  initalize
}

shift $(($OPTIND -1))

while getopts "n:r:c:h" OPTION; do
  case $OPTION in
    n)
      echo "Name"
      ;;
    r)
      echo "Route"
      ;;
    c)
      echo "Code"
      ;;
    h|-help)
      help
      exit 1
      ;;
    *)
      echo "Invalid parameter(s) or option(s)."
      help
      exit 1
      ;;
  esac
done

if [ $# -lt 1 ]; then
  help
  exit 0
fi

SUBCOMMAND_OPT="${1:-help}"

case ${SUBCOMMAND_OPT} in
    "help"|"up"|"cmd_desc")
        ${SUBCOMMAND_OPT} "$@"
        ;;
    *)
        up "$@"
        ;;
esac
